<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Unblocked Games</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  /* ==== GLOBAL STYLES ==== */
  body,html { margin:0; padding:0; font-family: Arial, sans-serif; background:#111; color:#fff;}
  a { text-decoration:none; color:inherit;}
  .container { max-width: 1200px; margin:auto; padding:20px;}
  h1 { text-align:center; margin-bottom:20px;}

  /* ==== GAME LIST ==== */
  .game-grid {
    display:grid;
    grid-template-columns: repeat(auto-fill,minmax(150px,1fr));
    gap:15px;
  }
  .game-card {
    background:#222;
    border-radius:8px;
    overflow:hidden;
    text-align:center;
    cursor:pointer;
    transition:0.2s;
  }
  .game-card:hover {
    transform:scale(1.05);
    background:#333;
  }
  .game-card img {
    width:100%;
    display:block;
  }
  .game-card span {
    display:block;
    padding:10px;
    font-size:14px;
  }

  /* ==== PLAY PAGE ==== */
  .play-view {
    text-align:center;
  }
  iframe {
    width: 100%;
    height: calc(100vh - 140px);
    border:none;
    border-radius:8px;
  }
  .back-btn {
    display:inline-block;
    margin:15px 0;
    padding:10px 20px;
    background:#444;
    border-radius:6px;
    cursor:pointer;
  }
  .back-btn:hover {background:#555;}
</style>
</head>
<body>

<div class="container" id="main"></div>

<script>
// ==== CONFIG ====
// Replace this with the real raw JSON URL
const GAMES_JSON_URL = "https://raw.githubusercontent.com/swarmintelli/Unblocked-Games-CDN/refs/heads/main/games.json";

// ==== NAV UTILS ====
function navigateTo(hash) {
  window.location.hash = hash;
  render();
}

// ==== ROUTES ====
async function render() {
  const main = document.getElementById("main");
  const hash = window.location.hash;

  if (!hash || hash === "#list") {
    // LIST PAGE
    main.innerHTML = "<h1>Unblocked Games</h1><div class='game-grid' id='gameGrid'></div>";
    try {
      const res = await fetch(GAMES_JSON_URL);
      const games = await res.json();
      const grid = document.getElementById("gameGrid");
      games.forEach(game => {
        const card = document.createElement("div");
        card.className = "game-card";
        card.innerHTML = `
          <img src="${game.game_image_icon}" alt="${game.title}">
          <span>${game.title}</span>
        `;
        card.onclick = () => navigateTo("#play-" + game.id);
        grid.appendChild(card);
      });
    } catch (err) {
      main.innerHTML += "<p>Failed to load games. Update GAMES_JSON_URL.</p>";
      console.error(err);
    }
  } else if (hash.startsWith("#play-")) {
    const gameId = hash.replace("#play-","");
    try {
      const res = await fetch(GAMES_JSON_URL);
      const games = await res.json();
      const game = games.find(g => g.id === gameId);

      if (!game) {
        main.innerHTML = "<p>Game not found</p>";
        return;
      }
      main.innerHTML = `
        <div class="play-view">
          <div class="back-btn" onclick="navigateTo('#list')">‚Üê Back to Games</div>
          <h1>${game.title}</h1>
          ${game.iframe}
        </div>
      `;
    } catch (err) {
      main.innerHTML = "<p>Error loading game.</p>";
      console.error(err);
    }
  }
}

// init
window.addEventListener("hashchange", render);
render();
</script>

</body>
</html>
